CREATE DATABASE Manolo;

CREATE TABLE Profesores (
    id_profesor INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50),
    mail VARCHAR(100),
    dias_de_clase DATE
);

CREATE TABLE Asesores (
    id_asesor INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    mail VARCHAR(100)
);

CREATE TABLE DatosMercado (
    id_instrumento INT AUTO_INCREMENT PRIMARY KEY,
    pr_MEP INT NOT NULL,
    pr_acciones INT NOT NULL,
    pr_bonos INT NOT NULL
);

CREATE TABLE Corredores (
    id_corredor INT AUTO_INCREMENT PRIMARY KEY,
    id_instrumento INT,
    nombre VARCHAR(50),
    mail VARCHAR(100),
    FOREIGN KEY (id_instrumento) REFERENCES DatosMercado(id_instrumento)
);

CREATE TABLE Usuarios (
    id_usuario INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50),
    mail VARCHAR(100),
    fecha_apertura DATE,
    id_profesor INT,
    id_corredor INT,
    id_asesor INT,
    id_instrumento INT,
    FOREIGN KEY (id_profesor) REFERENCES Profesores(id_profesor),
    FOREIGN KEY (id_corredor) REFERENCES Corredores(id_corredor),
    FOREIGN KEY (id_asesor) REFERENCES Asesores(id_asesor),
    FOREIGN KEY (id_instrumento) REFERENCES DatosMercado(id_instrumento)
);

-- Creo una tabla para manejar la relación mucho a muchos entre Corredores y DatosMercado 

CREATE TABLE Corredores_DatosMercado (
  id_corredor_instrumento INT AUTO_INCREMENT PRIMARY KEY,
  id_corredor INT,
  pr_bonos INT NOT NULL,
  pr_MEP INT NOT NULL, 
  pr_acciones INT NOT NULL,
  FOREIGN KEY (id_corredor) REFERENCES Corredores(id_corredor)
);

-- Creo una tabla para manejar la relación mucho a muchos entre Usuarios y DatosMercado 

CREATE TABLE Usuarios_DatosMercado (
  id_usuario_instrumento INT AUTO_INCREMENT PRIMARY KEY,
  id_usuario INT,
  pr_bonos INT NOT NULL,
  pr_MEP INT NOT NULL, 
  pr_acciones INT NOT NULL,
  FOREIGN KEY (id_usuario) REFERENCES Usuarios(id_usuario)
);

